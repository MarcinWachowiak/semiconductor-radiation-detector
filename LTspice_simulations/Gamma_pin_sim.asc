Version 4
SHEET 1 5644 1840
WIRE -400 -176 -400 -192
WIRE -1616 -144 -1680 -144
WIRE -1616 -112 -1616 -144
WIRE 2384 -112 2240 -112
WIRE 2608 -112 2464 -112
WIRE -2144 -96 -2144 -128
WIRE -2048 -96 -2048 -128
WIRE -1952 -96 -1952 -128
WIRE 2992 -96 2864 -96
WIRE 3088 -96 2992 -96
WIRE 3424 -96 3168 -96
WIRE -1152 -80 -1568 -80
WIRE -400 -80 -400 -96
WIRE -400 -80 -464 -80
WIRE -352 -80 -400 -80
WIRE -224 -80 -272 -80
WIRE -176 -80 -224 -80
WIRE 0 -80 -112 -80
WIRE -464 -48 -464 -80
WIRE -400 -48 -400 -80
WIRE 2304 -48 2304 -160
WIRE 2992 -48 2992 -96
WIRE -928 -32 -992 -32
WIRE -752 -32 -864 -32
WIRE 1984 -32 1984 -48
WIRE 2032 -32 1984 -32
WIRE 2112 -32 2096 -32
WIRE 2128 -32 2112 -32
WIRE 2240 -32 2240 -112
WIRE 2240 -32 2208 -32
WIRE 2272 -32 2240 -32
WIRE 3152 -32 3120 -32
WIRE 3424 -32 3424 -96
WIRE 3424 -32 3232 -32
WIRE 3568 -32 3424 -32
WIRE 2384 -16 2336 -16
WIRE 2448 -16 2384 -16
WIRE 2512 -16 2448 -16
WIRE 2528 -16 2512 -16
WIRE 2608 -16 2608 -112
WIRE 2608 -16 2592 -16
WIRE 2704 -16 2704 -32
WIRE 2704 -16 2608 -16
WIRE 2752 -16 2704 -16
WIRE -2144 0 -2144 -16
WIRE -2048 0 -2048 -16
WIRE -1952 0 -1952 -16
WIRE -1744 0 -1760 0
WIRE -1616 0 -1616 -16
WIRE -1616 0 -1664 0
WIRE -1072 0 -1072 -144
WIRE -224 0 -224 -80
WIRE -176 0 -224 0
WIRE 0 0 0 -80
WIRE 0 0 -96 0
WIRE 2272 0 2176 0
WIRE 2608 0 2608 -16
WIRE 3504 0 3504 -96
WIRE -1616 16 -1616 0
WIRE -1408 16 -1504 16
WIRE -1232 16 -1344 16
WIRE 944 16 816 16
WIRE 1168 16 1008 16
WIRE 1600 16 1472 16
WIRE 1824 16 1664 16
WIRE 2384 16 2384 -16
WIRE 2448 16 2448 -16
WIRE 2928 16 2928 -112
WIRE 3424 16 3424 -32
WIRE 3472 16 3424 16
WIRE -992 32 -992 -32
WIRE -928 32 -992 32
WIRE -752 32 -752 -32
WIRE -752 32 -848 32
WIRE -144 32 -144 -192
WIRE 352 32 224 32
WIRE 576 32 416 32
WIRE 2176 32 2176 0
WIRE 2512 32 2512 -16
WIRE 2864 32 2864 -96
WIRE 2896 32 2864 32
WIRE 3568 32 3568 -32
WIRE 3568 32 3536 32
WIRE 3648 32 3568 32
WIRE 3680 32 3648 32
WIRE -464 48 -464 16
WIRE -400 48 -400 32
WIRE 1104 48 1104 -128
WIRE 1760 48 1760 -128
WIRE 2992 48 2992 16
WIRE 2992 48 2960 48
WIRE 3024 48 2992 48
WIRE 3120 48 3120 -32
WIRE 3120 48 3088 48
WIRE 3152 48 3120 48
WIRE 3232 48 3216 48
WIRE 3424 48 3232 48
WIRE 3472 48 3424 48
WIRE -896 64 -896 -144
WIRE 512 64 512 -112
WIRE 1072 64 1024 64
WIRE 1728 64 1680 64
WIRE 2752 64 2752 -16
WIRE 2896 64 2752 64
WIRE 3648 64 3648 32
WIRE -224 80 -224 0
WIRE -176 80 -224 80
WIRE 480 80 432 80
WIRE 1168 80 1168 16
WIRE 1168 80 1136 80
WIRE 1280 80 1168 80
WIRE 1824 80 1824 16
WIRE 1824 80 1792 80
WIRE 1984 80 1984 -32
WIRE 1984 80 1824 80
WIRE 3424 80 3424 48
WIRE 576 96 576 32
WIRE 576 96 544 96
WIRE 656 96 576 96
WIRE 704 96 656 96
WIRE 816 96 816 16
WIRE 816 96 784 96
WIRE 848 96 816 96
WIRE 960 96 928 96
WIRE 1072 96 960 96
WIRE 1280 96 1280 80
WIRE 1360 96 1280 96
WIRE 1472 96 1472 16
WIRE 1472 96 1440 96
WIRE 1504 96 1472 96
WIRE 1616 96 1584 96
WIRE 1728 96 1616 96
WIRE 2608 96 2608 80
WIRE 3232 96 3232 48
WIRE -1744 112 -1776 112
WIRE -1616 112 -1616 80
WIRE -1616 112 -1664 112
WIRE -1504 112 -1504 16
WIRE -1504 112 -1616 112
WIRE -1408 112 -1504 112
WIRE -1232 112 -1232 16
WIRE -1232 112 -1328 112
WIRE -1152 112 -1152 -80
WIRE -1152 112 -1232 112
WIRE -992 112 -992 32
WIRE -992 112 -1152 112
WIRE -928 112 -992 112
WIRE 0 112 0 0
WIRE 0 112 -32 112
WIRE 64 112 64 96
WIRE 64 112 0 112
WIRE 112 112 64 112
WIRE 224 112 224 32
WIRE 224 112 192 112
WIRE 256 112 224 112
WIRE 368 112 336 112
WIRE 480 112 368 112
WIRE 656 112 656 96
WIRE 2240 112 2240 -32
WIRE 2272 112 2240 112
WIRE 2384 112 2384 80
WIRE 2384 112 2352 112
WIRE -752 144 -752 32
WIRE -752 144 -784 144
WIRE -704 144 -752 144
WIRE -544 144 -624 144
WIRE -384 144 -544 144
WIRE -224 144 -304 144
WIRE -176 144 -224 144
WIRE 960 144 960 96
WIRE 1616 144 1616 96
WIRE 2176 144 2176 112
WIRE -224 160 -224 144
WIRE 368 160 368 112
WIRE 1024 160 1024 64
WIRE 1056 160 1024 160
WIRE 1168 160 1168 80
WIRE 1168 160 1136 160
WIRE 1680 160 1680 64
WIRE 1712 160 1680 160
WIRE 1824 160 1824 80
WIRE 1824 160 1792 160
WIRE -1072 176 -1072 80
WIRE -1072 176 -1152 176
WIRE -928 176 -1072 176
WIRE 432 176 432 80
WIRE 464 176 432 176
WIRE 576 176 576 96
WIRE 576 176 544 176
WIRE 2112 176 2112 -32
WIRE 2208 176 2112 176
WIRE 2448 176 2448 80
WIRE 2448 176 2272 176
WIRE 2512 176 2512 112
WIRE 2512 176 2448 176
WIRE 3424 176 3424 144
WIRE 3648 176 3648 144
WIRE 1024 192 1024 160
WIRE 1680 192 1680 160
WIRE 2384 192 2384 112
WIRE 2448 192 2448 176
WIRE 3056 192 3024 192
WIRE 3344 192 3296 192
WIRE 432 208 432 176
WIRE -1504 224 -1504 112
WIRE -1408 224 -1504 224
WIRE -1232 224 -1232 112
WIRE -1232 224 -1328 224
WIRE -1152 240 -1152 176
WIRE -1072 240 -1072 176
WIRE 2928 256 2928 80
WIRE 3504 256 3504 64
WIRE -224 272 -224 240
WIRE 1104 272 1104 112
WIRE 1760 272 1760 112
WIRE 512 288 512 128
WIRE 2304 288 2304 16
WIRE 2384 288 2384 272
WIRE 2448 288 2448 272
WIRE 960 304 960 208
WIRE 1024 304 1024 272
WIRE 1616 304 1616 208
WIRE 1680 304 1680 272
WIRE 3424 304 3424 256
WIRE -144 320 -144 192
WIRE 368 320 368 224
WIRE 432 320 432 288
WIRE 3168 320 3168 288
WIRE 3232 320 3232 288
WIRE -1152 368 -1152 304
WIRE -1072 368 -1072 320
WIRE -896 368 -896 224
WIRE 3168 432 3168 400
WIRE 3232 432 3232 400
WIRE 3232 640 3168 640
WIRE 3280 640 3232 640
WIRE 3392 640 3360 640
WIRE 3424 640 3392 640
WIRE 3536 640 3504 640
WIRE 3168 656 3168 640
WIRE 3232 672 3232 640
WIRE 3456 672 3456 576
WIRE 2704 704 2400 704
WIRE 3392 704 3392 640
WIRE 3424 704 3392 704
WIRE 3632 704 3504 704
WIRE 3664 704 3632 704
WIRE 3632 720 3632 704
WIRE 2400 736 2400 704
WIRE 3280 736 2400 736
WIRE 3424 736 3360 736
WIRE 3536 736 3536 640
WIRE 3536 736 3504 736
WIRE 3168 768 3168 720
WIRE 3232 768 3232 752
WIRE 3456 784 3456 768
WIRE 3472 784 3472 768
WIRE 3632 832 3632 800
WIRE 3440 848 3440 768
WIRE 2208 880 2176 880
WIRE 2320 880 2288 880
WIRE 2256 912 2256 736
WIRE 1968 928 1904 928
WIRE 2064 928 2032 928
WIRE 2176 928 2176 880
WIRE 2176 928 2144 928
WIRE 2224 928 2176 928
WIRE 2320 944 2320 880
WIRE 2320 944 2288 944
WIRE 2400 944 2400 736
WIRE 2400 944 2320 944
WIRE 2224 960 2176 960
WIRE 2176 992 2176 960
WIRE 2960 1056 2912 1056
WIRE 3072 1056 3024 1056
WIRE 3456 1056 3456 1008
WIRE 2256 1072 2256 976
WIRE 3296 1088 3120 1088
WIRE 3424 1088 3376 1088
WIRE 3536 1088 3504 1088
WIRE 3632 1088 3536 1088
WIRE 3664 1088 3632 1088
WIRE 2176 1104 2176 1072
WIRE 2560 1104 2528 1104
WIRE 2656 1104 2640 1104
WIRE 2912 1104 2912 1056
WIRE 2960 1104 2912 1104
WIRE 3072 1104 3072 1056
WIRE 3072 1104 3040 1104
WIRE 3632 1104 3632 1088
WIRE 3424 1120 3392 1120
WIRE 2592 1136 2592 1104
WIRE 3264 1136 3264 1104
WIRE 2528 1152 2528 1104
WIRE 2560 1152 2528 1152
WIRE 2656 1168 2656 1104
WIRE 2656 1168 2624 1168
WIRE 2992 1168 2992 1008
WIRE 3456 1168 3456 1152
WIRE 3472 1168 3472 1152
WIRE 2400 1184 2400 944
WIRE 2560 1184 2400 1184
WIRE 2656 1184 2656 1168
WIRE 2720 1184 2656 1184
WIRE 2832 1184 2800 1184
WIRE 2912 1184 2912 1104
WIRE 2912 1184 2896 1184
WIRE 2960 1184 2912 1184
WIRE 3072 1200 3072 1104
WIRE 3072 1200 3024 1200
WIRE 3120 1200 3120 1088
WIRE 3120 1200 3072 1200
WIRE 2960 1216 2928 1216
WIRE 3120 1216 3120 1200
WIRE 3632 1216 3632 1184
WIRE 2592 1232 2592 1200
WIRE 3264 1232 3264 1216
WIRE 3264 1232 3216 1232
WIRE 3296 1232 3264 1232
WIRE 3392 1232 3392 1120
WIRE 3392 1232 3376 1232
WIRE 3424 1232 3392 1232
WIRE 3536 1232 3536 1088
WIRE 3536 1232 3504 1232
WIRE 2928 1248 2928 1216
WIRE 3264 1248 3264 1232
WIRE 3216 1264 3216 1232
WIRE 3216 1344 3216 1328
WIRE 3264 1344 3264 1328
WIRE 2928 1360 2928 1328
WIRE 2992 1360 2992 1232
WIRE 3440 1360 3440 1152
FLAG -1952 0 0
FLAG -1072 368 0
FLAG -896 368 0
FLAG -2144 0 0
FLAG -2048 0 0
FLAG -1152 368 0
FLAG -896 -144 VCC
FLAG -1072 -144 VCC
FLAG -1680 -144 VCC
FLAG -1760 0 VSS
FLAG -1776 112 Vbias
FLAG -2144 -128 VCC
FLAG -1952 -128 Vbias
FLAG -2048 -128 VSS
FLAG 2176 144 0
FLAG 2608 96 0
FLAG 2304 -160 VCC
FLAG 2304 288 VSS
FLAG 2448 288 VSS
FLAG 2384 288 VSS
FLAG 2928 1360 0
FLAG 3456 784 0
FLAG 3456 1168 0
FLAG 3472 1168 0
FLAG 3472 784 0
FLAG 3664 1088 Rising_slope_detector
IOPIN 3664 1088 Out
FLAG 3664 704 Pulse_duration
IOPIN 3664 704 Out
FLAG 3632 832 0
FLAG 3632 1216 0
FLAG 2992 1008 VCC
FLAG 3456 576 VCC
FLAG 3456 1008 VCC
FLAG 2992 1360 VSS
FLAG 3440 848 VSS
FLAG 3440 1360 VSS
FLAG 3648 176 0
FLAG 3424 304 0
FLAG 3232 432 0
FLAG 2928 -112 VCC
FLAG 3504 -96 VCC
FLAG 2928 256 VSS
FLAG 3504 256 VSS
FLAG 3680 32 ADC
IOPIN 3680 32 Out
FLAG -224 272 0
FLAG -144 -192 VCC
FLAG -144 320 VSS
FLAG 2176 1104 0
FLAG 2256 736 VCC
FLAG 2256 1072 VSS
FLAG 3168 432 0
FLAG 3344 192 VCC
FLAG 3024 192 0
FLAG 656 112 Fast_filter_output
IOPIN 656 112 Out
FLAG -400 48 0
FLAG 1616 304 0
FLAG 1680 304 0
FLAG 1760 -128 VCC
FLAG 1760 272 VSS
FLAG 368 320 0
FLAG 432 320 0
FLAG 512 -112 VCC
FLAG 512 288 VSS
FLAG 1904 928 Fast_filter_output
IOPIN 1904 928 In
FLAG -544 144 TIA
FLAG 64 96 Subtractor
IOPIN 64 96 Out
FLAG 1984 -48 Filters_output
IOPIN 1984 -48 Out
FLAG 2704 -32 Baseline_restorer
IOPIN 2704 -32 Out
FLAG 3120 1216 Differentiation_amplifier
IOPIN 3120 1216 Out
FLAG 2704 704 Comparator_inverter
IOPIN 2704 704 Out
FLAG 960 304 0
FLAG 1024 304 0
FLAG 1104 -128 VCC
FLAG 1104 272 VSS
FLAG -464 48 0
FLAG -400 -192 VCC
FLAG 3232 768 0
FLAG 3168 768 0
FLAG 3264 1344 0
FLAG 3216 1344 0
FLAG 3264 1104 VSS
FLAG 2592 1232 VSS
FLAG 2592 1104 VCC
SYMBOL cap -1408 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL voltage -1952 -112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -52 -10 Left 2
WINDOW 3 -50 13 Left 2
SYMATTR InstName V1
SYMATTR Value 32V
SYMBOL cap -928 -48 M90
WINDOW 0 13 -6 VBottom 2
WINDOW 3 -18 70 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.5p
SYMBOL res -1088 224 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL voltage -2144 -112 R0
WINDOW 0 -50 -13 Left 2
WINDOW 3 -47 13 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL current -1408 224 R270
WINDOW 123 0 0 Left 2
WINDOW 39 24 28 Left 2
WINDOW 0 -46 -246 VLeft 2
WINDOW 3 -78 -49 VCenter 2
SYMATTR InstName I1
SYMATTR Value PULSE(0 8n 100n 1n 100n 100n 50u 20)
SYMBOL res -832 48 M270
WINDOW 0 25 103 VTop 2
WINDOW 3 54 -13 VBottom 2
SYMATTR InstName R17
SYMATTR Value 10Meg
SYMBOL res -1760 128 R270
WINDOW 3 0 56 VBottom 2
WINDOW 0 32 56 VTop 2
SYMATTR Value 4.7k
SYMATTR InstName R15
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL cap -1632 16 R0
SYMATTR InstName C15
SYMATTR Value 4,7u
SYMBOL res -1760 16 R270
WINDOW 3 0 56 VBottom 2
WINDOW 0 32 56 VTop 2
SYMATTR Value 4.7k
SYMATTR InstName R18
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL voltage -2048 -112 R0
WINDOW 0 -55 -12 Left 2
WINDOW 3 -55 14 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value -5
SYMBOL njf -1568 -16 R180
SYMATTR InstName J1
SYMATTR Value CPH3910N
SYMBOL res -1088 -16 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL cap -1168 240 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL Opamps\\LTC6268 -896 144 R0
WINDOW 0 59 47 Left 2
WINDOW 3 61 72 Left 2
SYMATTR InstName U1
SYMBOL current -1408 112 R270
WINDOW 123 0 0 Left 2
WINDOW 39 24 28 Left 2
WINDOW 0 -19 -59 VLeft 2
WINDOW 3 -19 -21 VCenter 2
SYMATTR InstName I2
SYMATTR Value 20n
SYMBOL bv -608 144 R90
WINDOW 0 -55 86 Bottom 2
WINDOW 3 -184 29 Top 2
SYMATTR InstName B2
SYMATTR Value V=white(3e8*time)/1.1e2
SYMBOL cap 2096 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL res 2224 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 510
SYMBOL res 2160 16 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 2368 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 33k
SYMBOL res 2528 128 R180
WINDOW 0 -14 -18 VRight 2
WINDOW 3 -13 43 VRight 2
SYMATTR InstName R16
SYMATTR Value 1.6k
SYMBOL res 2480 -128 R90
WINDOW 0 -23 49 VBottom 2
WINDOW 3 -26 50 VTop 2
SYMATTR InstName R19
SYMATTR Value 300
SYMBOL res 2592 -16 R0
SYMATTR InstName R20
SYMATTR Value 1.6k
SYMBOL res 2368 176 R0
WINDOW 0 -30 35 VRight 2
WINDOW 3 -8 38 VRight 2
SYMATTR InstName R22
SYMATTR Value 1.6k
SYMBOL res 2432 176 R0
WINDOW 0 46 32 VRight 2
WINDOW 3 68 36 VRight 2
SYMATTR InstName R23
SYMATTR Value 1.6k
SYMBOL schottky 2528 0 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -82 60 Bottom 2
SYMATTR InstName D1
SYMATTR Value BAS40-04HM
SYMBOL schottky 2432 16 R0
WINDOW 0 32 108 VRight 2
WINDOW 3 53 -14 VRight 2
SYMATTR InstName D2
SYMATTR Value BAS40-04HM
SYMBOL schottky 2368 16 R0
WINDOW 0 31 109 VRight 2
WINDOW 3 54 -13 VRight 2
SYMATTR InstName D3
SYMATTR Value BAS40-04HM
SYMBOL schottky 2208 192 R270
WINDOW 0 -15 -48 VTop 2
WINDOW 3 -14 12 VBottom 2
SYMATTR InstName D4
SYMATTR Value BAS40-04HM
SYMBOL cap 2896 1168 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 42 30 VTop 2
SYMATTR InstName C11
SYMATTR Value 470p
SYMBOL res 3056 1088 R90
WINDOW 0 59 95 VBottom 2
WINDOW 3 32 26 VTop 2
SYMATTR InstName R1
SYMATTR Value 470k
SYMBOL cap 3024 1040 R90
WINDOW 0 15 58 VBottom 2
WINDOW 3 -12 7 VTop 2
SYMATTR InstName C12
SYMATTR Value 1p
SYMBOL res 2912 1232 R0
SYMATTR InstName R27
SYMATTR Value 100
SYMBOL res 2816 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 1
SYMBOL res 3376 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 100
SYMBOL res 3392 1216 R90
WINDOW 0 52 5 VBottom 2
WINDOW 3 49 16 VTop 2
SYMATTR InstName R31
SYMATTR Value 1k
SYMBOL Comparators\\LT1713 3456 1104 R0
WINDOW 0 15 -52 Left 2
WINDOW 3 15 -30 Left 2
SYMATTR InstName U8
SYMBOL Comparators\\LT1713 3456 720 R0
WINDOW 0 36 31 Left 2
WINDOW 3 37 53 Left 2
SYMATTR InstName U9
SYMBOL res 3520 1216 R90
WINDOW 0 7 19 VBottom 2
WINDOW 3 33 15 VTop 2
SYMATTR InstName R32
SYMATTR Value 22k
SYMBOL res 3520 624 R90
WINDOW 0 2 29 VBottom 2
WINDOW 3 33 30 VTop 2
SYMATTR InstName R36
SYMATTR Value 100k
SYMBOL res 3376 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 500
SYMBOL res 3616 704 R0
SYMATTR InstName R42
SYMATTR Value 20k
SYMBOL res 3616 1088 R0
SYMATTR InstName R43
SYMATTR Value 20k
SYMBOL res 3248 -48 R90
WINDOW 0 14 2 VBottom 2
WINDOW 3 19 4 VTop 2
SYMATTR InstName R29
SYMATTR Value 100
SYMBOL cap 3408 80 R0
SYMATTR InstName C14
SYMATTR Value 1n
SYMBOL res 3408 160 R0
SYMATTR InstName R38
SYMATTR Value 20
SYMBOL res 3632 48 R0
WINDOW 0 36 33 Left 2
WINDOW 3 35 63 Left 2
SYMATTR InstName R39
SYMATTR Value 20k
SYMBOL res 3184 -112 R90
WINDOW 0 12 4 VBottom 2
WINDOW 3 18 4 VTop 2
SYMATTR InstName R41
SYMATTR Value 100
SYMBOL schottky 3024 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 123 6 VBottom 2
SYMATTR InstName D5
SYMATTR Value BAS40-04HM
SYMBOL schottky 3152 64 R270
WINDOW 0 53 18 VTop 2
WINDOW 3 -2 -62 VBottom 2
SYMATTR InstName D6
SYMATTR Value BAS40-04HM
SYMBOL schottky 2976 -48 R0
WINDOW 0 -37 -18 Left 2
WINDOW 3 179 66 Left 2
SYMATTR InstName D7
SYMATTR Value BAS40-04HM
SYMBOL voltage 3168 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -4795 70 Left 2
WINDOW 0 -4838 71 Left 2
SYMATTR Value PULSE(0 5 40u 100n 100n 1u 50u 10)
SYMATTR InstName V4
SYMBOL res 3216 304 R0
SYMATTR InstName R45
SYMATTR Value 100
SYMBOL res -80 16 M270
WINDOW 0 31 83 VTop 2
WINDOW 3 58 34 VBottom 2
SYMATTR InstName R46
SYMATTR Value 1k
SYMBOL res -240 256 M180
WINDOW 0 -48 69 Left 2
WINDOW 3 -34 38 Left 2
SYMATTR InstName R47
SYMATTR Value 1k
SYMBOL res -400 128 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R48
SYMATTR Value 100
SYMBOL res -368 -96 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R49
SYMATTR Value 100
SYMBOL res 2160 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 2304 864 R90
WINDOW 0 -1 75 VBottom 2
WINDOW 3 -28 30 VTop 2
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res 2192 1088 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R25
SYMATTR Value 100
SYMBOL cap 2032 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL Opamps\\AD8066 2928 -16 R0
WINDOW 3 -112 113 Left 2
SYMATTR InstName U10
SYMBOL Opamps\\AD8066 3504 -32 R0
WINDOW 0 21 121 VRight 2
WINDOW 3 46 74 VRight 2
SYMATTR InstName U11
SYMBOL res 1456 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 6.2k
SYMBOL res 1600 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 18k
SYMBOL cap 1600 144 R0
WINDOW 0 -23 11 Left 2
WINDOW 3 -41 52 Left 2
SYMATTR InstName C2
SYMATTR Value 160p
SYMBOL cap 1664 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 160p
SYMBOL res 1808 144 R90
WINDOW 0 16 7 VBottom 2
WINDOW 3 19 -7 VTop 2
SYMATTR InstName R5
SYMATTR Value 6.8k
SYMBOL res 208 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 3k
SYMBOL res 352 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 33k
SYMBOL cap 352 160 R0
WINDOW 0 -23 11 Left 2
WINDOW 3 -46 50 Left 2
SYMATTR InstName C5
SYMATTR Value 200p
SYMBOL cap 416 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 200p
SYMBOL res 560 160 R90
WINDOW 0 11 11 VBottom 2
WINDOW 3 35 12 VTop 2
SYMATTR InstName R12
SYMATTR Value 9.1k
SYMBOL res 416 192 R0
SYMATTR InstName R14
SYMATTR Value 1.8k
SYMBOL res 1664 176 R0
SYMATTR InstName R21
SYMATTR Value 3.3k
SYMBOL Opamps\\opamp2 512 32 R0
WINDOW 0 9 -36 Left 2
WINDOW 3 10 -14 Left 2
SYMATTR InstName U13
SYMATTR Value ADA4898
SYMBOL Opamps\\opamp2 1760 16 R0
WINDOW 0 7 -37 Left 2
WINDOW 3 6 -16 Left 2
SYMATTR InstName U14
SYMATTR Value ADA4898
SYMBOL res 3392 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 100
SYMBOL Opamps\\AD8066 2304 -80 R0
WINDOW 0 16 11 Left 2
WINDOW 3 17 36 Left 2
SYMATTR InstName U2
SYMBOL Opamps\\AD8066 2256 880 R0
SYMATTR InstName U4
SYMBOL Opamps\\AD8066 2992 1136 R0
SYMATTR InstName U5
SYMBOL res 800 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 3.6k
SYMBOL res 944 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 30k
SYMBOL cap 944 144 R0
WINDOW 0 -23 11 Left 2
WINDOW 3 -41 52 Left 2
SYMATTR InstName C9
SYMATTR Value 180p
SYMBOL cap 1008 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 180p
SYMBOL res 1152 144 R90
WINDOW 0 16 7 VBottom 2
WINDOW 3 19 -7 VTop 2
SYMATTR InstName R35
SYMATTR Value 8.2k
SYMBOL res 1008 176 R0
SYMATTR InstName R40
SYMATTR Value 2k
SYMBOL Opamps\\opamp2 1104 16 R0
WINDOW 0 7 -37 Left 2
WINDOW 3 6 -16 Left 2
SYMATTR InstName U7
SYMATTR Value ADA4898
SYMBOL res -416 -192 R0
SYMATTR InstName R44
SYMATTR Value 100
SYMBOL res -416 -64 R0
SYMATTR InstName R50
SYMATTR Value 92
SYMBOL cap -480 -48 R0
SYMATTR InstName C16
SYMATTR Value 4.7µ
SYMBOL Opamps\\LTC6228 -144 112 R0
SYMATTR InstName U12
SYMBOL res 3216 656 R0
SYMATTR InstName R52
SYMATTR Value 10
SYMBOL cap 3152 656 R0
SYMATTR InstName C17
SYMATTR Value 4.7µ
SYMBOL res 3248 1120 R0
SYMATTR InstName R53
SYMATTR Value 2.2k
SYMBOL res 3248 1232 R0
SYMATTR InstName R54
SYMATTR Value 3.3k
SYMBOL cap 3200 1264 R0
WINDOW 0 -37 5 Left 2
WINDOW 3 -38 50 Left 2
SYMATTR InstName C18
SYMATTR Value 4.7µ
SYMBOL cap -112 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value 22p
SYMBOL Opamps\\opamp2 2592 1104 R0
WINDOW 0 16 102 Left 2
WINDOW 3 18 127 Left 2
SYMATTR InstName U15
SYMATTR Value ADA4898
SYMBOL res 2656 1088 R90
WINDOW 0 16 7 VBottom 2
WINDOW 3 19 -7 VTop 2
SYMATTR InstName R55
SYMATTR Value 100
SYMBOL Switches\\ADG701 3184 192 M270
WINDOW 0 -91 156 VBottom 2
WINDOW 3 -128 123 VCenter 2
SYMATTR InstName U3
TEXT -2312 248 Left 2 !.tran 300u
TEXT -1488 160 Left 2 ;Dark reverse current
TEXT -1464 272 Left 2 ;Radiation pulses
TEXT -2312 224 Left 2 ;ANALYSIS:
TEXT -2312 424 Left 2 ;External dependencies:
TEXT -1680 344 Left 2 ;Peak detector reset signal
TEXT -1496 -56 Left 4 ;PHOTODIODE
TEXT -1888 -232 Left 4 ;BOOTSTRAP
TEXT -1200 -312 Left 4 ;TRANSIMPEDANCE\nAMPLIFIER
TEXT -2208 -280 Left 4 ;POWER\nSUPPLY
TEXT -2320 184 Left 4 ;SIMULATION PRESET
TEXT 2000 -328 Left 4 ;BASELINE RESTORER \nANTI-PILEUP
TEXT 2688 1448 Left 4 ;SENSITIVE\nDIFFERENTIATIOR\nAMPLIFIER
TEXT 3144 1448 Left 4 ;INVERTING COMPARATOR \nWITH HYSTERESIS
TEXT 3120 520 Right 4 ;NON-INVERTING\nCOMPARATOR\nWITH HYSTERESIS
TEXT 2720 -280 Left 4 ;FAST PEAK DETECTOR WITH RESET
TEXT -400 -424 Left 4 ;INVERTING AMPLIFIER\nWITH DC OFFSET \nCANCELLATION\n(SUBSTRACTOR)
TEXT 1936 1256 Left 4 ;INVERTER \nWITH AC\nCOUPLING
TEXT -2312 448 Left 2 !.lib E:\\Programy\\LTSpice\\lib\\sub\\ADA4898.sub
TEXT 144 -288 Left 4 ;GAUSSIAN PULSE SHAPER, SECOND ORDER BESSEL FILTER, SALLEN-KEY TOPOLOGY
TEXT 144 -352 Left 6 ;LOW PASS FILTER 50kHz
TEXT -2312 272 Left 2 !.options gmin=1e-10 \n.options abstol=1e-10 \n.options reltol=0.003 \n.options cshunt=1e-15
TEXT -1696 432 Left 4 ;Exact values of components are yet to\nbe adjusted for optimal readings of the detector
LINE Normal -1216 -32 -1520 -32 1
LINE Normal -1696 400 -1216 400 1
LINE Normal -1696 208 -1696 400 1
LINE Normal -1520 208 -1696 208 1
LINE Normal -1520 -32 -1520 208 1
LINE Normal -1216 400 -1216 -32 1
RECTANGLE Normal -736 400 -1200 -240 1
RECTANGLE Normal -1712 496 -2320 208 1
RECTANGLE Normal -1536 192 -1888 -208 1
RECTANGLE Normal -1904 48 -2208 -208 1
RECTANGLE Normal 2688 400 2000 -256 1
RECTANGLE Normal 3104 1424 2432 944 1
RECTANGLE Normal 3584 1424 3136 944 1
RECTANGLE Normal 3584 928 3136 496 1
RECTANGLE Normal 3584 480 2720 -256 1
RECTANGLE Normal 48 400 -608 -256 1
RECTANGLE Normal 2368 1232 1936 592 1
RECTANGLE Normal 1968 400 1328 -256 1
RECTANGLE Normal 640 400 80 -256 1
RECTANGLE Normal 1312 400 672 -256 1
